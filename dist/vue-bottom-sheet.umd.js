(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("hammerjs")):typeof define=="function"&&define.amd?define(["exports","vue","hammerjs"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.VueBottomSheet={},a.Vue,a.Hammer))})(this,function(a,e,r){"use strict";const w=l=>(e.pushScopeId("data-v-bd328146"),l=l(),e.popScopeId(),l),C=["aria-hidden"],V=w(()=>e.createElementVNode("div",{class:"bottom-sheet__default-draggable-area"},[e.createElementVNode("div",{class:"bottom-sheet__draggable-thumb"})],-1)),k=e.defineComponent({__name:"VueBottomSheet",props:{overlay:{type:Boolean,default:!0},overlayColor:{default:"#0000004D"},maxWidth:{default:640},maxHeight:{},transitionDuration:{default:.5},overlayClickClose:{type:Boolean,default:!0},canSwipe:{type:Boolean,default:!0},hideDragHandle:{type:Boolean,default:!1},roundness:{default:"16px"}},emits:["opened","closed","dragging-up","dragging-down"],setup(l,{expose:m,emit:i}){const o=l;e.useCssVars(t=>({"69c8804c":I.value,aa26e1fa:o.overlayColor,"39b99c86":$.value,"7643faf6":N.value,"078a2cc5":M.value,"0b9922ec":B.value}));const c=e.ref(!1),d=e.ref(0),s=e.ref(100),p=e.ref(!1),_=e.ref(0),b=e.ref(null),y=e.ref(null),u=e.ref(null),S=e.ref(null),T=e.ref(null),v=e.ref(null),D=t=>document.activeElement===t;window.addEventListener("keyup",t=>{const n=b.value.contains(t.target)&&D(t.target);t.key==="Escape"&&!n&&h()});const H=e.computed(()=>["bottom-sheet__content",{"bottom-sheet__content--fullscreen":d.value>=window.innerHeight,"bottom-sheet__content--dragging":p.value}]),I=e.computed(()=>`${o.transitionDuration}s`),N=e.computed(()=>d.value&&d.value>0?`${d.value+1}px`:"auto"),B=e.computed(()=>o.maxHeight?`${o.maxHeight}px`:"inherit"),$=e.computed(()=>`${s.value}%`),M=e.computed(()=>`${o.maxWidth}px`),O=async()=>{await e.nextTick(),d.value=y.value.offsetHeight+u.value.clientHeight+S.value.offsetHeight},E=(t,n)=>{if(o.canSwipe){p.value=!0;const f=F=>{F.preventDefault()};t.deltaY>0&&(n==="main"&&t.type==="panup"&&(s.value=g(t.deltaY),t.cancelable&&u.value.addEventListener("touchmove",f)),n==="main"&&t.type==="pandown"&&_.value===0&&(s.value=g(t.deltaY)),n==="area"&&(s.value=g(t.deltaY)),t.type==="panup"&&i("dragging-up"),t.type==="pandown"&&i("dragging-down")),t.isFinal&&(u.value.removeEventListener("touchmove",f),n==="main"&&(_.value=u.value.scrollTop),p.value=!1,s.value>=10?h():s.value=0)}};e.nextTick(()=>{O();const t=new r(v.value,{inputClass:r.TouchMouseInput,recognizers:[[r.Pan,{direction:r.DIRECTION_VERTICAL}]]}),n=new r(u.value,{inputClass:r.TouchMouseInput,recognizers:[[r.Pan,{direction:r.DIRECTION_VERTICAL}]]});t.on("panstart panup pandown panend",f=>{E(f,"area")}),n.on("panstart panup pandown panend",f=>{E(f,"main")})});const Y=()=>{s.value=0,document.documentElement.style.overflowY="hidden",document.documentElement.style.overscrollBehavior="none",c.value=!0,i("opened")},h=async()=>{c.value=!1,s.value=100,setTimeout(()=>{document.documentElement.style.overflowY="auto",document.documentElement.style.overscrollBehavior="",i("closed")},o.transitionDuration*1e3)},A=()=>{o.overlayClickClose&&h()},g=t=>{const n=o.maxHeight&&o.maxHeight<=d.value?o.maxHeight:d.value;return t/n*100};return m({open:Y,close:h}),(t,n)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{class:"bottom-sheet",ref_key:"bottomSheet",ref:b,"aria-hidden":!c.value,role:"dialog"},[e.createVNode(e.Transition,null,{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{onClick:A,class:"bottom-sheet__overlay"},null,512),[[e.vShow,t.overlay&&c.value]])]),_:1}),e.createElementVNode("div",{ref_key:"bottomSheetContent",ref:T,class:e.normalizeClass(H.value),style:e.normalizeStyle(`border-radius: ${t.roundness} ${t.roundness} 0 0`)},[e.createElementVNode("header",{ref_key:"bottomSheetHeader",ref:y,class:"bottom-sheet__header"},[e.createElementVNode("div",{ref_key:"bottomSheetDraggableArea",ref:v,class:"bottom-sheet__draggable-area"},[t.hideDragHandle?e.createCommentVNode("",!0):e.renderSlot(t.$slots,"drag-handle",{key:0},()=>[V],!0)],512),e.renderSlot(t.$slots,"header",{},void 0,!0)],512),e.createElementVNode("main",{ref_key:"bottomSheetMain",ref:u,class:"bottom-sheet__main"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512),e.createElementVNode("footer",{ref_key:"bottomSheetFooter",ref:S,class:"bottom-sheet__footer"},[e.renderSlot(t.$slots,"footer",{},void 0,!0)],512)],6)],8,C)]))}}),L="",x=((l,m)=>{const i=l.__vccOpts||l;for(const[o,c]of m)i[o]=c;return i})(k,[["__scopeId","data-v-bd328146"]]);a.default=x,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
