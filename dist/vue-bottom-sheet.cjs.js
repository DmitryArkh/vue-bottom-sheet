"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("hammerjs"),$=n=>(e.pushScopeId("data-v-bd328146"),n=n(),e.popScopeId(),n),M=["aria-hidden"],O=$(()=>e.createElementVNode("div",{class:"bottom-sheet__default-draggable-area"},[e.createElementVNode("div",{class:"bottom-sheet__draggable-thumb"})],-1)),Y=e.defineComponent({__name:"VueBottomSheet",props:{overlay:{type:Boolean,default:!0},overlayColor:{default:"#0000004D"},maxWidth:{default:640},maxHeight:{},transitionDuration:{default:.5},overlayClickClose:{type:Boolean,default:!0},canSwipe:{type:Boolean,default:!0},hideDragHandle:{type:Boolean,default:!1},roundness:{default:"16px"}},emits:["opened","closed","dragging-up","dragging-down"],setup(n,{expose:h,emit:s}){const o=n;e.useCssVars(t=>({"69c8804c":H.value,aa26e1fa:o.overlayColor,"39b99c86":x.value,"7643faf6":V.value,"078a2cc5":D.value,"0b9922ec":k.value}));const i=e.ref(!1),u=e.ref(0),r=e.ref(100),f=e.ref(!1),p=e.ref(0),g=e.ref(null),_=e.ref(null),c=e.ref(null),b=e.ref(null),E=e.ref(null),S=e.ref(null),w=t=>document.activeElement===t;window.addEventListener("keyup",t=>{const a=g.value.contains(t.target)&&w(t.target);t.key==="Escape"&&!a&&m()});const C=e.computed(()=>["bottom-sheet__content",{"bottom-sheet__content--fullscreen":u.value>=window.innerHeight,"bottom-sheet__content--dragging":f.value}]),H=e.computed(()=>`${o.transitionDuration}s`),V=e.computed(()=>u.value&&u.value>0?`${u.value+1}px`:"auto"),k=e.computed(()=>o.maxHeight?`${o.maxHeight}px`:"inherit"),x=e.computed(()=>`${r.value}%`),D=e.computed(()=>`${o.maxWidth}px`),I=async()=>{await e.nextTick(),u.value=_.value.offsetHeight+c.value.clientHeight+b.value.offsetHeight},y=(t,a)=>{if(o.canSwipe){f.value=!0;const d=B=>{B.preventDefault()};t.deltaY>0&&(a==="main"&&t.type==="panup"&&(r.value=v(t.deltaY),t.cancelable&&c.value.addEventListener("touchmove",d)),a==="main"&&t.type==="pandown"&&p.value===0&&(r.value=v(t.deltaY)),a==="area"&&(r.value=v(t.deltaY)),t.type==="panup"&&s("dragging-up"),t.type==="pandown"&&s("dragging-down")),t.isFinal&&(c.value.removeEventListener("touchmove",d),a==="main"&&(p.value=c.value.scrollTop),f.value=!1,r.value>=10?m():r.value=0)}};e.nextTick(()=>{I();const t=new l(S.value,{inputClass:l.TouchMouseInput,recognizers:[[l.Pan,{direction:l.DIRECTION_VERTICAL}]]}),a=new l(c.value,{inputClass:l.TouchMouseInput,recognizers:[[l.Pan,{direction:l.DIRECTION_VERTICAL}]]});t.on("panstart panup pandown panend",d=>{y(d,"area")}),a.on("panstart panup pandown panend",d=>{y(d,"main")})});const T=()=>{r.value=0,document.documentElement.style.overflowY="hidden",document.documentElement.style.overscrollBehavior="none",i.value=!0,s("opened")},m=async()=>{i.value=!1,r.value=100,setTimeout(()=>{document.documentElement.style.overflowY="auto",document.documentElement.style.overscrollBehavior="",s("closed")},o.transitionDuration*1e3)},N=()=>{o.overlayClickClose&&m()},v=t=>{const a=o.maxHeight&&o.maxHeight<=u.value?o.maxHeight:u.value;return t/a*100};return h({open:T,close:m}),(t,a)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{class:"bottom-sheet",ref_key:"bottomSheet",ref:g,"aria-hidden":!i.value,role:"dialog"},[e.createVNode(e.Transition,null,{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{onClick:N,class:"bottom-sheet__overlay"},null,512),[[e.vShow,t.overlay&&i.value]])]),_:1}),e.createElementVNode("div",{ref_key:"bottomSheetContent",ref:E,class:e.normalizeClass(C.value),style:e.normalizeStyle(`border-radius: ${t.roundness} ${t.roundness} 0 0`)},[e.createElementVNode("header",{ref_key:"bottomSheetHeader",ref:_,class:"bottom-sheet__header"},[e.createElementVNode("div",{ref_key:"bottomSheetDraggableArea",ref:S,class:"bottom-sheet__draggable-area"},[t.hideDragHandle?e.createCommentVNode("",!0):e.renderSlot(t.$slots,"drag-handle",{key:0},()=>[O],!0)],512),e.renderSlot(t.$slots,"header",{},void 0,!0)],512),e.createElementVNode("main",{ref_key:"bottomSheetMain",ref:c,class:"bottom-sheet__main"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],512),e.createElementVNode("footer",{ref_key:"bottomSheetFooter",ref:b,class:"bottom-sheet__footer"},[e.renderSlot(t.$slots,"footer",{},void 0,!0)],512)],6)],8,M)]))}});const A=(n,h)=>{const s=n.__vccOpts||n;for(const[o,i]of h)s[o]=i;return s},F=A(Y,[["__scopeId","data-v-bd328146"]]);exports.default=F;
